<html>
    <head>
        <meta charset="utf-8" />
        <title>Schrodinger's Sandbox</title>
        <!--
        <script defer src="https://unpkg.com/mathlive"></script>
        <script defer src="https://unpkg.com/@cortex-js/compute-engine"></script>
        -->
        <script defer type="module">
          window.addEventListener('DOMContentLoaded', () =>
          import('https://unpkg.com/mathlive?module').then( (mathlive) => mathlive.renderMathInDocument()) );
        </script>
        <script type="module">
          import { ComputeEngine } from 'https://unpkg.com/@cortex-js/compute-engine?module';
          const ce = new ComputeEngine();
        </script>
        <script src="index.js"></script>
        <script src="https://cdn.jsdelivr.net/pyodide/v0.23.2/full/pyodide.js"></script>
        <script>
          async function main(){
            let pyodide = await loadPyodide();
            console.log(pyodide.runPython("1 + 2"));
          }
          main();
        </script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.4/Chart.js"></script>
        <link rel="stylesheet" href="index.css">
    </head>
    <body>
        <template hidden="hidden">
          <div class="equation-piece">
            <math-field class="equation-piece-field"></math-field>
            \(x \in [ \) <input type="number" value="-10" step="0.01" class="range-low">, <input type="number" value="10" step="0.01" class="range-high"> \( ] \)
          </div>
        </template>

        <h1>Schrodinger's Sandbox</h1>
        <h2>Numerical Solutions to Quantum Wave Functions Simulator</h2>

        <div id="mid-1" class="mid">
            The Schrodinger equation
            \[ i\hbar \frac{\partial \Psi}{\partial t} = -\frac{\hbar^2}{2m} \frac{\partial^2\Psi}{\partial x^2} + V \Psi \]
            <br>
        </div>

        <div id="mid-2" class="mid">
          The potential energy function:<br>
          \( V(x) = \)
          <div class="equation-pieces-set" id="equation-pieces-set-v">
            <div class="equation-piece">
              <math-field class="equation-piece-field">\frac{1}{2}x^2</math-field>
              \(x \in [ \) <input type="number" value="-10" step="0.01" class="range-low">, <input type="number" value="10" step="0.01" class="range-high"> \( ] \)
            </div>
          </div>
          <button>+ add function piece</button>
        </div>

        <div id="mid-3" class="mid">
          The initial wave function:<br>
          \( \psi(x) = \)
          <div class="equation-pieces-set" id="equation-pieces-set-psi">
            <div class="equation-piece">
              <math-field class="equation-piece-field">4 - \frac{(x+4)^2}{4}</math-field>
              \(x \in [ \) <input type="number" value="-8" step="0.01" class="range-low">, <input type="number" value="0" step="0.01" class="range-high"> \( ] \)
            </div>
          </div>
          <button>+ add function piece</button>
        </div>

        <div id="mid-4" class="mid">
          <button id="plot-init">plot potential energy and wave</button>
          <canvas id="plot-potential-init-wave" class="func-plots" width="2000" height="1400"></canvas>
        </div>

        <div id="mid-5" class="mid">
          <button id="solve-eigenfuncs">Solve for standing waves</button><br>
          <input type="range" id="eigenfunc-display-slider" min="0" max="0" value="0" step="1"><br>
          <canvas id="plot-eigen-waves" class="func-plots" width="2000" height="1400"></canvas>

        </div>
        <div id="mid-6" class="mid">
          t: <input type="number" value="0" min="0" step="0.01" id="wave-t"> <button id="play-wave">play</button>
          <canvas id="plot-wave-progression" class="func-plots" width="2000" height="1400"></canvas>
        </div>

        <div id="mid-7" class="mid">
        </div>
        <div id="mid-8" class="mid">
        </div>
    </body>
</html>
